{
  "name": "validate",
  "configType": "CHANNEL",
  "product": "sfCore",
  "flow": ["validate"],
  "steps": {
    "validate": {
      "processor": "ss-starfish-data-channels-BuiltInProcessor-dev",
      "method": "validate",
      "inputs": ["users","enrollment","relationships","sections"],
      "granularity": "row",
      "parameters": {
        "validateConfig": {
          "users": {
            "columns": {
              "integration_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "family_name": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "middle_name": {
                "required": false,
                "validTypes": ["string"],
                "invalidIfBlank": false
              },
              "given_name": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "email": {
                "required": false,
                "validTypes": ["email"],
                "invalidIfBlank": false
              },
              "secondary_email": {
                "required": false,
                "validTypes": ["email"],
                "invalidIfBlank": false
              },
              "user_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "gender": {
                "required": false,
                "validTypes": ["string"],
                "invalidIfBlank": false,
                "validValues": ["M", "F", "U", "MALE", "FEMALE", "UNKNOWN"],
                "caseInSensitive": true
              },
              "available_ind": {
                "required": true,
                "validTypes": ["integer"],
                "invalidIfBlank": true,
                "validValues": ["1", "0"]
              },
              "assign_student_role": {
                "required": false,
                "validTypes": ["integer"],
                "invalidIfBlank": false,
                "validValues": ["1", "0"]
              },
              "allow_login": {
                "required": false,
                "validTypes": ["integer"],
                "invalidIfBlank": false,
                "validValues": ["1", "0"]
              },
              "birth_dt": {
                "required": false,
                "validTypes": ["datetime"],
                "invalidIfBlank": false,
                "dateTimeFormat": "YYYY-MM-DD"
              }
            },
            "includeDataInLog": false,
            "includeLogInData": false,
            "discardInvalidRows": false
          },
          "enrollment": {
            "columns": {
              "course_section_integration_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "user_integration_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "user_role": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true,
                "validValues": ["Student", "Instructor", "TA"],
                "caseInSensitive": true
              },
              "available_ind": {
                "required": true,
                "validTypes": ["integer"],
                "invalidIfBlank": true,
                "validValues": ["1", "0"]
              },
              "last_access_date": {
                "required": false,
                "validTypes": ["datetime"],
                "invalidIfBlank": false,
                "dateTimeFormat": "YYYY-MM-DD HH:MM:SS"
              },
              "authoritative_status": {
                "required": false,
                "validTypes": ["string"],
                "invalidIfBlank": false,
                "validValues": ["01", "02", "03", "04", "05", "06"]
              }
            },
            "includeDataInLog": true,
            "includeLogInData": true,
            "discardInvalidRows": false
          },
          "relationships": {
            "columns": {
              "parent_integration_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "parent_role": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "child_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "child_role": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true,
                "validValues": ["Student", "Basic user", "Instructor", "TA"],
                "caseInSensitive": true
              },
              "term_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              }
            },
            "includeDataInLog": true,
            "includeLogInData": true,
            "discardInvalidRows": false
          },
          "sections": {
            "columns": {
              "integration_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "course_section_name": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "course_section_id": {
                "required": true,
                "validTypes": ["string"],
                "invalidIfBlank": true
              },
              "start_dt": {
                "required": false,
                "validTypes": ["datetime"],
                "invalidIfBlank": false,
                "dateTimeFormat": "YYYY-MM-DD"
              },
              "end_dt": {
                "required": false,
                "validTypes": ["datetime"],
                "invalidIfBlank": false,
                "dateTimeFormat": "YYYY-MM-DD"
              },
              "term_id": {
                "required": false,
                "validTypes": ["string"],
                "invalidIfBlank": false
              },
              "course_integration_id": {
                "required": false,
                "validTypes": ["string"],
                "invalidIfBlank": false
              },
              "course_section_delivery": {
                "required": false,
                "validTypes": ["string"],
                "invalidIfBlank": false,
                "validValues": ["01", "02", "03", "99"]
              }
            },
            "includeDataInLog": true,
            "includeLogInData": true,
            "discardInvalidRows": false
          }
        },
        "dynamicOutput":"true",
        "dynamicInput": "true"
      }
    }
  }
}
